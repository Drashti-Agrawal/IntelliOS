{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "type": "object",
    "properties": {
        "saved_at": {
            "type": "string",
            "description": "ISO 8601 formatted timestamp of when the state was saved",
            "format": "date-time",
            "examples": ["2025-08-26T12:32:41.9607091+05:30"]
        },
        "user": {
            "type": "string",
            "description": "Windows username of the current user",
            "examples": ["jaypa"]
        },
        "browsers": {
            "type": "array",
            "description": "List of browser states with their windows and tabs",
            "items": {
                "type": "object",
                "properties": {
                    "browser": {
                        "type": "string",
                        "enum": ["chrome", "edge", "opera"],
                        "description": "Name of the browser"
                    },
                    "exe": {
                        "type": "string",
                        "description": "Full path to the browser executable",
                        "examples": ["C:\\Program Files (x86)\\Google\\Chrome\\Application\\chrome.exe"]
                    },
                    "windows": {
                        "type": "array",
                        "items": {
                            "type": "object",
                            "properties": {
                                "profile": {
                                    "type": "string",
                                    "description": "Path to the browser profile directory",
                                    "examples": ["C:\\ChromeDebugProfile"]
                                },
                                "debuggingPort": {
                                    "type": "integer",
                                    "description": "Remote debugging port for this window instance",
                                    "minimum": 9222,
                                    "examples": [9222]
                                },
                                "tabs": {
                                    "type": "array",
                                    "items": {
                                        "type": "object",
                                        "properties": {
                                            "id": {
                                                "type": ["string", "null"],
                                                "description": "Identifier for the devtools target (if available)"
                                            },
                                            "url": {
                                                "type": "string",
                                                "description": "Full URL of the tab",
                                                "format": "uri"
                                            },
                                            "title": {
                                                "type": "string",
                                                "description": "Title of the webpage in the tab"
                                            },
                                            "description": {
                                                "type": "string",
                                                "description": "Additional description or metadata for the tab"
                                            },
                                            "tab_launched_at": {
                                                "type": ["string", "null"],
                                                "description": "ISO timestamp (UTC) when the browsing context was created (from CDP), or null if not available",
                                                "format": "date-time"
                                            }
                                        },
                                        "required": ["url", "title", "captured_at"]
                                    }
                                }
                            },
                            "required": ["profile", "debuggingPort", "tabs"]
                        }
                    }
                },
                "required": ["browser", "windows"]
            }
        },
        "apps": {
            "type": "array",
            "description": "List of running applications and their opened files",
            "items": {
                "type": "object",
                "properties": {
                    "name": {
                        "type": "string",
                        "description": "Executable name of the application",
                        "examples": ["EXCEL.EXE", "Notepad.Exe"]
                    },
                    "pid": {
                        "type": ["integer", "null"],
                        "description": "Process ID of the application instance",
                        "examples": [1234]
                    },
                    "exe": {
                        "type": ["string", "null"],
                        "description": "Full path to the executable",
                        "examples": ["C:\\Program Files\\Microsoft Office\\root\\Office16\\EXCEL.EXE"]
                    },
                    "cmdline": {
                        "type": ["string", "null"],
                        "description": "Command line arguments used to start the application"
                    },
                    "items": {
                        "type": "array",
                        "description": "List of files currently opened by the application",
                        "items": {
                            "type": "string",
                            "description": "Full path to an opened file or folder",
                            "opened_at": {
                                "type": "string",
                                "description": "ISO timestamp (UTC) when the file or folder was opened",
                                "format": "date-time"
                            }
                        }
                    },
                    "windowInfo": {
                        "type": ["object", "null"],
                        "description": "Window information for the application",
                        "properties": {
                            "title": {
                                "type": "string",
                                "description": "Title of the window"
                            },
                            "position": {
                                "type": "object",
                                "properties": {
                                    "x": {
                                        "type": "integer",
                                        "description": "X coordinate of the window"
                                    },
                                    "y": {
                                        "type": "integer",
                                        "description": "Y coordinate of the window"
                                    }
                                }
                            },
                            "size": {
                                "type": "object",
                                "properties": {
                                    "width": {
                                        "type": "integer",
                                        "description": "Width of the window"
                                    },
                                    "height": {
                                        "type": "integer",
                                        "description": "Height of the window"
                                    }
                                }
                            },
                            "state": {
                                "type": "string",
                                "enum": ["normal", "maximized", "minimized"],
                                "description": "Window state"
                            }
                        }
                    }
                },
                "required": ["name", "items"]
            }
        }
    },
    "required": ["saved_at", "user", "browsers", "apps"]
}